<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Mil - Our Interactive Journey</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== RESET & VARIABLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff6b8b;
            --secondary: #6a5af9;
            --accent: #4dccc6;
            --gold: #ffd166;
            --dark: #0a0a16;
            --light: #f8f9fa;
            --journey-line: #ff4757;
        }

        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            height: 100vh;
            background-color: var(--dark);
            color: white;
        }

        /* ===== VIEWPORT / KAMERA ===== */
        #viewport {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            position: relative;
            perspective: 1000px;
        }

        /* ===== KANVAS UTAMA (Virtual Map) ===== */
        #main-stage {
            position: absolute;
            width: 500vw;    /* 5x lebar layar */
            height: 500vh;   /* 5x tinggi layar */
            transition: transform 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-origin: center center;
            will-change: transform;
        }

        /* ===== SCENE / LOKASI DI PETA ===== */
        .scene {
            position: absolute;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        /* Posisi setiap scene di kanvas besar */
        #scene-1 { left: 0vw; top: 0vh; }
        #scene-2 { left: 100vw; top: 100vh; }
        #scene-3 { left: 200vw; top: 300vh; }
        #scene-4 { left: 300vw; top: 150vh; }
        #scene-5 { left: 400vw; top: 50vh; }

        /* ===== STYLE UNTUK SETIAP SCENE ===== */
        .scene-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 10;
        }

        .scene-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            margin-bottom: 25px;
            text-align: center;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* ===== GAMBAR DEKORASI ===== */
        .decoration {
            position: absolute;
            z-index: 1;
            pointer-events: none;
            opacity: 0.7;
        }

        .flower {
            width: 120px;
            animation: float 6s ease-in-out infinite;
        }

        .map-pin {
            width: 60px;
            animation: bounce 2s ease-in-out infinite;
        }

        .heart-deco {
            width: 80px;
            animation: pulse 2s ease-in-out infinite;
        }

        /* ===== CANVAS UNTUK KEMBANG API ===== */
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* ===== TOMBOL NAVIGASI ===== */
        .nav-buttons {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px 25px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }

        .nav-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: var(--primary);
            transform: scale(1.1);
            border-color: white;
            box-shadow: 0 0 20px var(--primary);
        }

        .nav-btn.active {
            background: var(--secondary);
            border-color: var(--accent);
        }

        /* ===== TOMBOL ACTION ===== */
        .action-btn {
            padding: 15px 35px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 20px rgba(255, 107, 139, 0.3);
        }

        .action-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 107, 139, 0.5);
        }

        /* ===== GARIS PERJALANAN (Journey Path) ===== */
        #journey-path {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }

        .path-line {
            stroke: var(--journey-line);
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 10;
            animation: dashMove 20s linear infinite;
        }

        /* ===== GALERI FOTO ===== */
        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .photo-frame {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .photo-frame:hover {
            transform: scale(1.05);
            border-color: var(--accent);
        }

        .photo-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #aaa;
            font-size: 3rem;
        }

        /* ===== MUSIC PLAYER ===== */
        .music-player {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .music-toggle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .music-toggle:hover {
            background: var(--accent);
            transform: rotate(360deg);
        }

        /* ===== ANIMATIONS ===== */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        @keyframes dashMove {
            to { stroke-dashoffset: 1000; }
        }

        @keyframes textGlow {
            0%, 100% { text-shadow: 0 0 10px var(--primary); }
            50% { text-shadow: 0 0 20px var(--accent), 0 0 30px var(--secondary); }
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .scene-content { padding: 25px; }
            .scene-title { font-size: 2.8rem; }
            .nav-buttons { gap: 10px; padding: 12px 20px; }
            .nav-btn { width: 45px; height: 45px; font-size: 1rem; }
            .photo-gallery { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <!-- VIEWPORT / KAMERA -->
    <div id="viewport">
        <!-- KANVAS BESAR (Virtual Map) -->
        <div id="main-stage">
            
            <!-- SCENE 1: FIREWORKS & HAPPY NEW YEAR -->
            <div class="scene" id="scene-1" style="background: linear-gradient(135deg, #1a1a2e 0%, #0f3460 100%);">
                <!-- GAMBAR DEKORASI DI SINI -->
                <img src="https://cdn.pixabay.com/photo/2017/09/23/16/33/pixel-heart-2779422_1280.png" 
                     class="decoration flower" style="top:10%; left:5%; width: 100px;">
                <img src="https://cdn.pixabay.com/photo/2017/09/23/16/33/pixel-heart-2779422_1280.png" 
                     class="decoration flower" style="bottom:15%; right:10%; transform: rotate(45deg); width: 80px;">
                
                <div class="scene-content">
                    <h1 class="scene-title">Happy New Year, Mil! üéÜ</h1>
                    <p style="font-size: 1.3rem; text-align: center; margin-bottom: 25px; line-height: 1.6;">
                        As the clock strikes midnight, I want you to know that my hope for us grows stronger.<br>
                        This new beginning is our canvas. Let's paint it together.
                    </p>
                    
                    <!-- TOMBOL PELUNCUR KEMBANG API -->
                    <button class="action-btn" id="ignite-btn">
                        <i class="fas fa-fire"></i> Ignite Our New Year
                    </button>
                    
                    <p style="margin-top: 20px; color: #aaa; text-align: center; font-size: 0.9rem;">
                        Click above to launch a magical fireworks display just for you
                    </p>
                </div>
            </div>
            
            <!-- SCENE 2: PERSONAL MESSAGE -->
            <div class="scene" id="scene-2" style="background: linear-gradient(135deg, #0f3460 0%, #16213e 100%);">
                <!-- PIN LOKASI -->
                <img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" 
                     class="decoration map-pin" style="top:20%; left:15%;">
                
                <div class="scene-content">
                    <h2 class="scene-title">My Heart's Message üíå</h2>
                    
                    <!-- GANTI FOTO INI DENGAN FOTO KALIAN -->
                    <div style="text-align: center; margin: 25px 0;">
                        <div class="photo-frame" style="max-width: 300px; margin: 0 auto;">
                            <div class="photo-placeholder">
                                <i class="fas fa-heart"></i>
                            </div>
                            <!-- UNTUK FOTO ASLI: -->
                            <!-- <img src="LINK_FOTO_KALIAN_DISINI.jpg" style="width:100%; height:100%; object-fit:cover;"> -->
                        </div>
                        <p style="margin-top: 10px; color: #ccc; font-style: italic;">
                            Our best memory together
                        </p>
                    </div>
                    
                    <div style="font-size: 1.2rem; line-height: 1.8; background: rgba(255,255,255,0.03); padding: 25px; border-radius: 15px; border-left: 4px solid var(--primary);">
                        <p>My dearest Mil,</p>
                        <p style="margin-top: 15px;">
                            This past year taught me what truly matters. It's not about being right in arguments, 
                            but about being present in understanding. It's not about winning discussions, 
                            but about nurturing our connection.
                        </p>
                        <p style="margin-top: 15px;">
                            I've realized that the space between us wasn't created by one big mistake, 
                            but by small moments of missed communication. For every time I didn't listen with my whole heart, 
                            for every moment I let pride speak louder than love, I am deeply sorry.
                        </p>
                        <p style="margin-top: 15px; font-weight: 500; color: var(--accent);">
                            The New Year is our fresh start. Not to forget the past, but to learn from it. 
                            Not to erase what happened, but to write better chapters together.
                        </p>
                    </div>
                    
                    <div style="text-align: right; margin-top: 30px; font-family: 'Dancing Script'; font-size: 2.5rem; color: var(--gold);">
                        With all my love,<br>Rik
                    </div>
                </div>
            </div>
            
            <!-- SCENE 3: HOPES & WISHES -->
            <div class="scene" id="scene-3" style="background: linear-gradient(135deg, #16213e 0%, #1a1a2e 100%);">
                <div class="scene-content">
                    <h2 class="scene-title">Our Hopes for 2024 üåü</h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                        <div style="background: rgba(255,107,139,0.1); padding: 25px; border-radius: 15px; border-top: 5px solid var(--primary);">
                            <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-comments"></i> Better Communication
                            </h3>
                            <p>To truly listen without planning a response. To speak with kindness even when it's hard.</p>
                        </div>
                        
                        <div style="background: rgba(106,90,249,0.1); padding: 25px; border-radius: 15px; border-top: 5px solid var(--secondary);">
                            <h3 style="color: var(--secondary); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-heartbeat"></i> More Patience
                            </h3>
                            <p>Understanding that growth takes time, and beautiful things can't be rushed.</p>
                        </div>
                        
                        <div style="background: rgba(77,204,198,0.1); padding: 25px; border-radius: 15px; border-top: 5px solid var(--accent);">
                            <h3 style="color: var(--accent); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-laugh-beam"></i> New Happy Memories
                            </h3>
                            <p>Creating moments that make us smile whenever we remember them.</p>
                        </div>
                    </div>
                    
                    <!-- GALERI FOTO: GANTI DENGAN FOTO KALIAN -->
                    <div style="margin-top: 40px;">
                        <h3 style="color: white; margin-bottom: 20px; text-align: center;">Moments Worth Repeating</h3>
                        <div class="photo-gallery">
                            <!-- Foto 1 -->
                            <div class="photo-frame">
                                <div class="photo-placeholder">
                                    <i class="fas fa-music"></i>
                                </div>
                                <!-- GANTI DENGAN: <img src="LINK_FOTO_1.jpg" style="width:100%; height:100%; object-fit:cover;"> -->
                            </div>
                            <!-- Foto 2 -->
                            <div class="photo-frame">
                                <div class="photo-placeholder">
                                    <i class="fas fa-coffee"></i>
                                </div>
                            </div>
                            <!-- Foto 3 -->
                            <div class="photo-frame">
                                <div class="photo-placeholder">
                                    <i class="fas fa-sun"></i>
                                </div>
                            </div>
                            <!-- Foto 4 -->
                            <div class="photo-frame">
                                <div class="photo-placeholder">
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SCENE 4: MEMORY LANE -->
            <div class="scene" id="scene-4" style="background: linear-gradient(135deg, #1a1a2e 0%, #0f3460 100%);">
                <div class="scene-content">
                    <h2 class="scene-title">Our Journey Together üó∫Ô∏è</h2>
                    
                    <div style="text-align: center; margin: 30px 0;">
                        <!-- GANTI DENGAN PETA/PETA CINTA -->
                        <div style="background: rgba(255,255,255,0.05); border-radius: 15px; padding: 30px; display: inline-block;">
                            <i class="fas fa-map-marked-alt" style="font-size: 4rem; color: var(--accent); margin-bottom: 15px;"></i>
                            <p style="color: #ccc;">Our love map - every pin marks a special memory</p>
                        </div>
                    </div>
                    
                    <div style="max-width: 600px; margin: 0 auto;">
                        <div style="display: flex; align-items: center; gap: 20px; margin: 25px 0; padding: 20px; background: rgba(255,255,255,0.03); border-radius: 15px;">
                            <div style="font-size: 2.5rem; color: var(--primary);">üéµ</div>
                            <div>
                                <h4 style="color: white;">That Song We Both Love</h4>
                                <p style="color: #aaa;">The one that always reminds me of you</p>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 20px; margin: 25px 0; padding: 20px; background: rgba(255,255,255,0.03); border-radius: 15px;">
                            <div style="font-size: 2.5rem; color: var(--secondary);">‚òï</div>
                            <div>
                                <h4 style="color: white;">Late Night Conversations</h4>
                                <p style="color: #aaa;">When we talked about everything and nothing</p>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 20px; margin: 25px 0; padding: 20px; background: rgba(255,255,255,0.03); border-radius: 15px;">
                            <div style="font-size: 2.5rem; color: var(--accent);">üòÇ</div>
                            <div>
                                <h4 style="color: white;">That Inside Joke</h4>
                                <p style="color: #aaa;">The one that still makes us laugh</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SCENE 5: FUTURE TOGETHER -->
            <div class="scene" id="scene-5" style="background: linear-gradient(135deg, #0f3460 0%, #16213e 100%);">
                <div class="scene-content">
                    <h2 class="scene-title">Our Path Forward üåà</h2>
                    
                    <p style="font-size: 1.3rem; text-align: center; margin-bottom: 30px; line-height: 1.7;">
                        "The best thing about the future is that it comes one day at a time."<br>
                        <span style="color: var(--accent); font-style: italic;">- Abraham Lincoln</span>
                    </p>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 30px; border-radius: 20px; margin: 30px 0; border-left: 5px solid var(--gold);">
                        <h3 style="color: var(--gold); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-compass"></i> Our Promise
                        </h3>
                        <p style="font-size: 1.2rem; line-height: 1.8;">
                            I promise to meet you with an open heart. To choose understanding over being right. 
                            To build bridges where there were walls. This isn't about going back to how things were, 
                            but about moving forward to something even better.
                        </p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 40px;">
                        <button class="action-btn" onclick="moveCameraTo(0, 0)">
                            <i class="fas fa-redo"></i> Start the Journey Again
                        </button>
                        <p style="margin-top: 20px; color: #aaa;">
                            The story continues... whenever you're ready.
                        </p>
                    </div>
                </div>
            </div>
            
        </div> <!-- END #main-stage -->
        
        <!-- CANVAS UNTUK KEMBANG API -->
        <canvas id="fireworks-canvas"></canvas>
        
        <!-- GARIS PERJALANAN (SVG) -->
        <svg id="journey-path" width="100%" height="100%">
            <!-- Garis merah menghubungkan scene-scene -->
            <path class="path-line" d="M50,50 L150,150 L250,350 L350,200 L450,100" />
        </svg>
        
    </div> <!-- END #viewport -->
    
    <!-- TOMBOL NAVIGASI -->
    <div class="nav-buttons">
        <button class="nav-btn active" data-target="0" title="Fireworks">
            <i class="fas fa-fire"></i>
        </button>
        <button class="nav-btn" data-target="1" title="Message">
            <i class="fas fa-envelope"></i>
        </button>
        <button class="nav-btn" data-target="2" title="Hopes">
            <i class="fas fa-star"></i>
        </button>
        <button class="nav-btn" data-target="3" title="Memories">
            <i class="fas fa-images"></i>
        </button>
        <button class="nav-btn" data-target="4" title="Future">
            <i class="fas fa-route"></i>
        </button>
    </div>
    
    <!-- MUSIC PLAYER -->
    <div class="music-player">
        <button class="music-toggle" id="music-toggle">
            <i class="fas fa-music"></i>
        </button>
    </div>

    <!-- AUDIO ELEMENT -->
    <audio id="background-music" loop>
        <!-- GANTI DENGAN LINK LAGU FAVORIT KALIAN -->
        <source src="https://assets.mixkit.co/music/preview/mixkit-happy-dreams-1250.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        // ========== KONFIGURASI ==========
        const scenes = [
            { x: 0, y: 0, scale: 1 },      // Scene 1
            { x: -100, y: -100, scale: 1 }, // Scene 2
            { x: -200, y: -300, scale: 1 }, // Scene 3
            { x: -300, y: -150, scale: 1.2 }, // Scene 4 (zoom in)
            { x: -400, y: -50, scale: 1 }   // Scene 5
        ];
        
        let currentScene = 0;
        let isMusicPlaying = false;
        
        // ========== DOM ELEMENTS ==========
        const mainStage = document.getElementById('main-stage');
        const navButtons = document.querySelectorAll('.nav-btn');
        const musicToggle = document.getElementById('music-toggle');
        const backgroundMusic = document.getElementById('background-music');
        const igniteBtn = document.getElementById('ignite-btn');
        const fireworksCanvas = document.getElementById('fireworks-canvas');
        
        // ========== FIREWORKS SYSTEM ==========
        // Inisialisasi canvas untuk kembang api
        const ctx = fireworksCanvas.getContext('2d');
        fireworksCanvas.width = window.innerWidth;
        fireworksCanvas.height = window.innerHeight;
        
        let fireworks = [];
        let particles = [];
        
        class Firework {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.size = 3;
                this.speed = 10;
                this.angle = Math.random() * Math.PI * 2;
                this.vx = Math.cos(this.angle) * this.speed;
                this.vy = Math.sin(this.angle) * this.speed;
                this.gravity = 0.1;
                this.alpha = 1;
                this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += this.gravity;
                this.alpha -= 0.01;
                
                return this.alpha > 0;
            }
            
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }
        
        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 3 + 1;
                this.speedX = Math.random() * 6 - 3;
                this.speedY = Math.random() * 6 - 3;
                this.color = color;
                this.alpha = 1;
                this.gravity = 0.05;
            }
            
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.speedY += this.gravity;
                this.alpha -= 0.02;
                
                return this.alpha > 0;
            }
            
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }
        
        function createFirework(x, y) {
            // Buat ledakan utama
            for (let i = 0; i < 50; i++) {
                fireworks.push(new Firework(x, y));
            }
            
            // Buat partikel sekunder
            const colors = ['#ff6b8b', '#6a5af9', '#4dccc6', '#ffd166'];
            for (let i = 0; i < 100; i++) {
                const color = colors[Math.floor(Math.random() * colors.length)];
                particles.push(new Particle(x, y, color));
            }
        }
        
        function animateFireworks() {
            // Clear canvas dengan alpha untuk efek fade
            ctx.fillStyle = 'rgba(10, 10, 22, 0.1)';
            ctx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
            
            // Update dan draw fireworks
            for (let i = fireworks.length - 1; i >= 0; i--) {
                if (!fireworks[i].update()) {
                    fireworks.splice(i, 1);
                } else {
                    fireworks[i].draw();
                }
            }
            
            // Update dan draw particles
            for (let i = particles.length - 1; i >= 0; i--) {
                if (!particles[i].update()) {
                    particles.splice(i, 1);
                } else {
                    particles[i].draw();
                }
            }
            
            // Lanjutkan animasi
            requestAnimationFrame(animateFireworks);
        }
        
        // Mulai animasi fireworks
        animateFireworks();
        
        // ========== KAMERA MOVEMENT ==========
        function moveCameraTo(sceneIndex) {
            const target = scenes[sceneIndex];
            
            // Update tombol navigasi aktif
            navButtons.forEach((btn, index) => {
                btn.classList.toggle('active', index === sceneIndex);
            });
            
            // Apply transform ke main stage
            mainStage.style.transform = `
                translate(${target.x}vw, ${target.y}vh)
                scale(${target.scale})
            `;
            
            currentScene = sceneIndex;
            
            // Update garis perjalanan
            updateJourneyPath(sceneIndex);
        }
        
        function updateJourneyPath(sceneIndex) {
            const path = document.querySelector('.path-line');
            const progress = sceneIndex / (scenes.length - 1);
            
            // Animasikan stroke dash offset
            path.style.strokeDashoffset = 1000 * (1 - progress);
        }
        
        // ========== MUSIC CONTROL ==========
        function toggleMusic() {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                musicToggle.innerHTML = '<i class="fas fa-music"></i>';
            } else {
                backgroundMusic.play().catch(e => {
                    console.log("Autoplay prevented:", e);
                    // Fallback: user harus interaksi dulu
                    musicToggle.style.background = 'var(--primary)';
                    musicToggle.innerHTML = '<i class="fas fa-play"></i>';
                });
                musicToggle.innerHTML = '<i class="fas fa-pause"></i>';
            }
            isMusicPlaying = !isMusicPlaying;
        }
        
        // ========== EVENT LISTENERS ==========
        // Tombol navigasi
        navButtons.forEach((btn, index) => {
            btn.addEventListener('click', () => moveCameraTo(index));
        });
        
        // Tombol kembang api
        igniteBtn.addEventListener('click', function() {
            // Buat kembang api di posisi random
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            
            // Beberapa ledakan sekaligus
            createFirework(x, y);
            setTimeout(() => createFirework(Math.random() * window.innerWidth, Math.random() * window.innerHeight), 200);
            setTimeout(() => createFirework(Math.random() * window.innerWidth, Math.random() * window.innerHeight), 400);
            
            // Auto-pindah ke scene message setelah 3 detik
            setTimeout(() => {
                moveCameraTo(1); // Pindah ke scene message
            }, 3000);
            
            // Ubah tombol
            this.innerHTML = '<i class="fas fa-check"></i> Fireworks Launched!';
            this.disabled = true;
            this.style.background = 'var(--accent)';
        });
        
        // Tombol musik
        musicToggle.addEventListener('click', toggleMusic);
        
        // Resize canvas saat window berubah
        window.addEventListener('resize', () => {
            fireworksCanvas.width = window.innerWidth;
            fireworksCanvas.height = window.innerHeight;
        });
        
        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' && currentScene < scenes.length - 1) {
                moveCameraTo(currentScene + 1);
            } else if (e.key === 'ArrowLeft' && currentScene > 0) {
                moveCameraTo(currentScene - 1);
            } else if (e.key === ' ') {
                // Space untuk kembang api di scene 1
                if (currentScene === 0) {
                    igniteBtn.click();
                }
            }
        });
        
        // ========== INITIALIZATION ==========
        // Mulai di scene 1
        moveCameraTo(0);
        
        // Auto-play musik setelah interaksi user
        document.body.addEventListener('click', function initMusic() {
            if (!isMusicPlaying) {
                backgroundMusic.volume = 0.3;
                toggleMusic();
            }
            document.body.removeEventListener('click', initMusic);
        }, { once: true });
        
        // Cursor custom effect
        document.addEventListener('mousemove', (e) => {
            // Tambahkan partikel di cursor (opsional)
            if (Math.random() > 0.7) {
                particles.push(new Particle(e.x, e.y, 'rgba(255,255,255,0.5)'));
            }
        });
        
        console.log("Website loaded successfully! Navigate using buttons or arrow keys.");
    </script>
</body>
</html>